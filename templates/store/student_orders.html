{% extends "base.html" %}
{% block title %}My Orders{% endblock %}
{% block content %}
<div class="container py-5">

  <h2 class="fw-bold text-center mb-5 text-gradient">ğŸ“¦ My Orders</h2>

  {% if shop_orders or print_orders %}
    <div class="row g-4">

      <!-- Shop Orders -->
      <div class="col-12">
        <div class="card shadow-sm border-0 rounded-4 overflow-hidden">
          <div class="card-header text-white fw-bold rounded-top-4 bg-gradient-shop">
            ğŸ› Shop Orders
          </div>
          <div class="card-body p-0">
            {% if shop_orders %}
              <div class="table-responsive">
                <table class="table align-middle mb-0 order-table">
                  <thead class="table-light">
                    <tr>
                      <th>ID</th>
                      <th>Item</th>
                      <th>Quantity</th>
                      <th>Status</th>
                      <th>Placed</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for order in shop_orders %}
                      <tr>
                        <td>#{{ order.id }}</td>
                        <td>{{ order.item.name }}</td>
                        <td>{{ order.quantity }}</td>
                        <td>
                          <span class="status-badge {{ order.status }}">
                            {{ order.get_status_display }}
                          </span>
                        </td>
                        <td>{{ order.created_at|date:"M d, Y H:i" }}</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            {% else %}
              <p class="text-muted text-center py-3 mb-0">No shop orders yet.</p>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Printing Orders -->
      <div class="col-12">
        <div class="card shadow-sm border-0 rounded-4 overflow-hidden">
          <div class="card-header text-white fw-bold rounded-top-4 bg-gradient-print">
            ğŸ–¨ Printing Orders
          </div>
          <div class="card-body p-0">
            {% if print_orders %}
              <div class="table-responsive">
                <table class="table align-middle mb-0 order-table">
                  <thead class="table-light">
                    <tr>
                      <th>ID</th>
                      <th>File</th>
                      <th>Pages</th>
                      <th>Status</th>
                      <th>Placed</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for order in print_orders %}
                      <tr>
                        <td>#{{ order.id }}</td>
                        <td>
                          <a href="{{ order.file.url }}" target="_blank">{{ order.file.name|slice:"10:" }}</a>
                        </td>
                        <td>{{ order.total_pages }}</td>
                        <td>
                          <span class="status-badge {{ order.status }}">
                            {{ order.get_status_display }}
                          </span>
                        </td>
                        <td>{{ order.created_at|date:"M d, Y H:i" }}</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            {% else %}
              <p class="text-muted text-center py-3 mb-0">No printing orders yet.</p>
            {% endif %}
          </div>
        </div>
      </div>

    </div>
  {% else %}
    <div class="text-center mt-5 p-5 bg-light rounded-4 shadow-sm">
      <p class="fs-5 text-muted">ğŸ™ You havenâ€™t placed any orders yet.</p>
      <a href="{% url 'shop' %}" class="btn btn-gradient mt-3">ğŸ›’ Start Shopping</a>
    </div>
  {% endif %}

</div>

<style>
  /* Gradient headers */
  .bg-gradient-shop {
    background: linear-gradient(90deg, #0d6efd, #6610f2);
  }
  .bg-gradient-print {
    background: linear-gradient(90deg, #198754, #20c997);
  }

  /* Table hover effect */
  .order-table tbody tr {
    transition: background 0.2s ease;
  }
  .order-table tbody tr:hover {
    background: #f9f9ff;
  }

  /* Status badges */
  .status-badge {
    display: inline-block;
    padding: 0.35rem 0.75rem;
    border-radius: 30px;
    font-size: 0.85rem;
    font-weight: 600;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  .status-badge.pending {
    background: linear-gradient(135deg, #6c757d, #adb5bd);
    color: #fff;
  }
  .status-badge.in_progress {
    background: linear-gradient(135deg, #ffc107, #ffda6a);
    color: #000;
  }
  .status-badge.delivered,
  .status-badge.printed {
    background: linear-gradient(135deg, #0dcaf0, #0d6efd);
    color: #fff;
  }
  .status-badge.done {
    background: linear-gradient(135deg, #198754, #20c997);
    color: #fff;
  }
  .status-badge.canceled {
    background: linear-gradient(135deg, #dc3545, #ff6b81);
    color: #fff;
  }

  /* Fancy title */
  .text-gradient {
    background: linear-gradient(90deg, #0d6efd, #20c997, #ff5722);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Gradient action button */
  .btn-gradient {
    background: linear-gradient(90deg, #0d6efd, #6610f2, #ff5722);
    border: none;
    color: #fff;
    font-weight: bold;
    transition: 0.3s;
    border-radius: 10px;
    padding: 10px 20px;
  }
  .btn-gradient:hover {
    background-position: right center;
    transform: scale(1.05);
    box-shadow: 0 6px 18px rgba(0,0,0,0.2);
  }
</style>
{% endblock %}
